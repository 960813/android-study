## 다단계 큐 스케줄링(MLQ; Multi-Level Queue)

![image-20201129012423203](C:\repository\ync-2nd-grade-at-2020-02\기말고사\02_운영체제\img\image-20201129012423203.png)

### 개요

* 각 작업을 서로 다른 묶음으로 분류할 수 있을 때 사용
* 준비 상태 큐를 종류별로 여러 단계로 분할
* 작업을 메모리의 크기나 프로세스의 형태에 따라 특정 큐에 지정
* 각 큐는 자신만의 독자적인 스케줄링을 가짐

### 장점

* 응답이 빠르다

### 단점

* 여러 준비 큐와 스케줄링 알고리즘 때문에 추가적인 오버헤드가 발생한다.
* 우선순위가 낮은 큐의 프로세스는 무한정 대기하는 기아가 발생할 수 있다.

## 다단계 피드백 큐 스케줄링

### 개요

* 작업이 시스템에 들어가면 한큐에서만 고정 실행
* 스케줄링 부담이 적다는 장점이 있으나 융통성이 떨어진다는 단점이 있음
* 작업이 큐 사이 이동 가능(프로세서 버스트의 특성에 따라 분리)

### 구조

![image-20201129013926361](C:\repository\ync-2nd-grade-at-2020-02\기말고사\02_운영체제\img\image-20201129013926361.png)

### 원리

![image-20201129013934637](C:\repository\ync-2nd-grade-at-2020-02\기말고사\02_운영체제\img\image-20201129013934637.png)

### 스케줄링 정의 방법

* 큐`queue` 수
* 각 큐에 대한 스케줄링
* 작업을 좀 더 높은 우선순위의 큐로 격상시키는 시기를 결정하는 방법
* 작업을 좀 더 낮은 우선순위의 큐로 격하시키는 시기를 결정하는 방법
* 프로세스들이 어느 큐에 들어갈 것인지 결정하는 방법
* 프로세스가 서비스를 받는 시기를 결정하는 방법

### 장점

* 매우 유연하여 스케줄러를 특정 시스템에 맞게 구성할 수 있다.
* 자동으로 입출력 중심과 프로세서 중심 프로세스로 분류한다.
* 적응성이 좋아 프로세스의 사전 정보가 없어도 최소작업 우선 스케줄링의 효과를 보여 준다.

### 단점

* 설계와 구현이 매우 복잡하다.

## HRN(Highest Response-ratio Next) 스케줄링

### 개요

* 최소작업 우선 스케줄링의 약점인 긴 작업과 짧은 작업 간의 지나친 불평등을 보완
* 비선점 스케줄링이며, 우선순위 스케줄링의 또 다른 예
* 선입선처리 스케줄링과 최소작업 우선 스케줄링의 약점을 해결하기 위해 제안
* 우선순위
  ![image-20201129014517824](C:\repository\ync-2nd-grade-at-2020-02\기말고사\02_운영체제\img\image-20201129014517824.png)
* 시스템 응답시간
  ![image-20201129014527678](C:\repository\ync-2nd-grade-at-2020-02\기말고사\02_운영체제\img\image-20201129014527678.png)

## 스레드 스케줄링의 개념

* 스레드를 이용하여 응용 프로그램을 동일한 주소 공간에서 동시에 실행하고 협동하는 스레드들로 구현할 수 있다는 것. 즉, 입출력과 프로세서 처리 중첩 가능
* 스레드 문맥 교환은 프로세스 문맥 교환보다 오버헤드가 적어 응용 프로그램 하나의 여러 스레드를 동시에 다른 프로세서에서 실행한다면 성능 향상 가능. 그러나 스레드 간에 많은 상호작용을 요청하는 응용 프로그램에서는 성능에 큰 영향을 줄 수 있음

## 스케줄링 알고리즘의 평가 기준

* 최대 응답시간이 1초라는 제약 조건에서 프로세서 이용률
* 평균 반환시간이 전체 실행 시간에 선형적으로 비례하는 처리율

## 병행 프로세스 / 병렬 프로세스

* 병행 프로세스: 여러 프로세스가 단일 프로세서에 의해 동시에 처리되는 것
* 병렬 프로세스: 여러 프로세스가 여러 프로세서에 의해 동시에 처리되는 것

## 경쟁 상태

### 개념

여러 프로세스가 동시에 공유 데이터에 접근할 때, 접근 순서에 따라 다른 결과를 발생시킬 수 있는 현상

## 상호배제

### 개념

임계 영역(Critical Section)을 정의하여 여러 프로세스가 동시에 공유 데이터에 접근할 수 없도록 해야 한다.

### 방법

* 소프트웨어적으로 해결: **데커의 알고리즘**, 램포트의 베이커리 알고리즘, 크누스의 알고리즘, 핸슨의 알고리즘, 다익스트라의 알고리즘
* 소프트웨어가 제공(프로그래밍 언어와 운영체제 수준에서 제공): **세마포어**, 모니터
* 하드웨어로 해결(저급 수준의 원자 연산): **TestAndSet**

## 데커의 알고리즘

* P0: P1의 flag(임계영역 진입 의사 있음)가 true이고 P1이 사용할 타이밍이라면 P0은 양보
* P1: P0의 flag(임계영역 진입 의사 있음)가 true이고 P0이 사용할 타이밍이라면 P1은 양보

* 무한 대기 - Busy waiting: while(turn==1) { ... }